@model DocumentManager.MVC.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Bảng điều khiển";
}

<style>
    .quick-access-card {
        transition: transform .2s;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    }

        .quick-access-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .quick-access-card .card-body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 150px;
        }

        .quick-access-card .card-icon {
            font-size: 3rem;
            color: #007bff;
        }

    .recent-docs-list .list-group-item {
        border-left: 3px solid #007bff;
        margin-bottom: 5px;
    }
</style>

<div class="text-center">
    <h1 class="display-4">Chào mừng đến với Hệ thống Quản lý Công văn</h1>
    <p>Nhanh chóng truy cập các chức năng chính hoặc xem các hoạt động gần đây.</p>
</div>

<hr />

<!-- Khu vực Đường dẫn tắt (ĐÃ CẬP NHẬT) -->
<h3 class="mt-4 mb-3">Đường dẫn tắt</h3>
<div class="row g-4">
    <div class="col-lg-3 col-md-6">
        <a asp-controller="IncomingDocuments" asp-action="Index" class="text-decoration-none">
            <div class="card quick-access-card text-center">
                <div class="card-body">
                    <i class="fas fa-file-download card-icon mb-2"></i>
                    <h5 class="card-title">Công văn đến</h5>
                </div>
            </div>
        </a>
    </div>
    <div class="col-lg-3 col-md-6">
        <a asp-controller="OutgoingDocuments" asp-action="Index" class="text-decoration-none">
            <div class="card quick-access-card text-center">
                <div class="card-body">
                    <i class="fas fa-file-upload card-icon mb-2"></i>
                    <h5 class="card-title">Công văn đi</h5>
                </div>
            </div>
        </a>
    </div>
    <div class="col-lg-3 col-md-6">
        <a asp-controller="Employees" asp-action="Index" class="text-decoration-none">
            <div class="card quick-access-card text-center">
                <div class="card-body">
                    <i class="fas fa-users card-icon mb-2"></i>
                    <h5 class="card-title">Quản lý Nhân viên</h5>
                </div>
            </div>
        </a>
    </div>
    <div class="col-lg-3 col-md-6">
        <a asp-controller="RecipientGroups" asp-action="Index" class="text-decoration-none">
            <div class="card quick-access-card text-center">
                <div class="card-body">
                    <i class="fas fa-users-cog card-icon mb-2"></i>
                    <h5 class="card-title">Quản lý Nhóm nhận</h5>
                </div>
            </div>
        </a>
    </div>
</div>

<hr class="my-5" />

<!-- Khu vực Hoạt động gần đây (ĐÃ CẬP NHẬT) -->
<h3 class="mb-3">Hoạt động gần đây</h3>
<div class="row">
    <!-- Cột Công văn đến mới nhất -->
    <div class="col-md-6">
        <h4><i class="fas fa-inbox text-success"></i> Công văn đến mới nhất</h4>
        <div class="list-group recent-docs-list">
            @if (Model.RecentIncomingDocuments != null && Model.RecentIncomingDocuments.Any())
            {
                @foreach (var doc in Model.RecentIncomingDocuments)
                {
                    <a asp-controller="IncomingDocuments" asp-action="Details" asp-route-id="@doc.ID" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">Số công văn: @doc.IncomingDocumentNumber</h5>
                            <small>@doc.ReleaseDate.ToString("dd/MM/yyyy")</small>
                        </div>
                        <p class="mb-1 text-truncate">Nội dung: @doc.DocumentContent</p>
                    </a>
                }
            }
            else
            {
                <div class="alert alert-info">Không có Công văn đến nào gần đây.</div>
            }
        </div>
    </div>
    <!-- Cột Công văn đi mới nhất -->
    <div class="col-md-6">
        <h4><i class="fas fa-paper-plane text-primary"></i> Công văn đi mới nhất</h4>
        <div class="list-group recent-docs-list">
            @if (Model.RecentOutgoingDocuments != null && Model.RecentOutgoingDocuments.Any())
            {
                @foreach (var doc in Model.RecentOutgoingDocuments)
                {
                    <a asp-controller="OutgoingDocuments" asp-action="Details" asp-route-id="@doc.ID" class="list-group-item list-group-item-action">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">@doc.OutgoingDocumentNumber</h5>
                            <small>@doc.ReleaseDate.ToString("dd/MM/yyyy")</small>
                        </div>
                        <p class="mb-1 text-truncate">@doc.DocumentContent</p>
                        @* 
                           Vì một Công văn có thể gửi đến nhiều nhóm, chúng ta sẽ không hiển thị chi tiết ở đây.
                           Một phương án đơn giản là chỉ hiển thị "Đã gửi đi".
                           Một phương án nâng cao hơn là phải gọi API để lấy danh sách nhóm, nhưng sẽ làm chậm trang chủ.
                        *@
                        <small><strong>Trạng thái:</strong> Đã gửi đi</small>
                    </a>
                }
            }
            else
            {
                <div class="alert alert-info">Không có Công văn đi nào gần đây.</div>
            }
        </div>
    </div>
</div>